<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

  <changeSet id="BM0000000000016" author="BushraMashaiekh">
      <createTable tableName="catalog_diagnostic_test">
        <column name="id" type="bigint">
          <constraints primaryKey="true" nullable="false" primaryKeyName="pk_catalog_diagnostic_test"/>
        </column>
        <column name="catalog_id" type="bigint">
          <constraints nullable="false" foreignKeyName="fk_cdt_catalog" referencedTableName="catalog" referencedColumnNames="id"/>
        </column>
        <column name="test_id" type="bigint" autoIncrement="true" startWith="1">
          <constraints nullable="false" foreignKeyName="fk_cdt_test" referencedTableName="diagnostic_test" referencedColumnNames="id"/>
        </column>
      </createTable>

      <addUniqueConstraint
        tableName="catalog_diagnostic_test"
        columnNames="catalog_id,test_id"
        constraintName="uq_cdt_catalog_test"/>

      <createIndex tableName="catalog_diagnostic_test" indexName="idx_cdt_catalog">
        <column name="catalog_id"/>
      </createIndex>
      <createIndex tableName="catalog_diagnostic_test" indexName="idx_cdt_test">
        <column name="test_id"/>
      </createIndex>
    </changeSet>
</databaseChangeLog>
